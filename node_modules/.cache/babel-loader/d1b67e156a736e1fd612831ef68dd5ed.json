{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\src\\\\context\\\\AuthContext.js\";\n\nimport React, { createContext, useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { checkInputField, validateEmail, validatePassword, validateUsername, isMatch } from \"../utils\";\nimport { SIGNUP_API, LOGIN_API } from \"../urls\";\nexport var AuthContext = createContext();\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n\n  var _ref2 = JSON.parse(localStorage.getItem(\"token\")) || {\n    token: null\n  },\n      savedToken = _ref2.token.savedToken;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLogin = _useState2[0],\n      setLogin = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var _useState5 = useState(savedToken),\n      _useState6 = _slicedToArray(_useState5, 2),\n      token = _useState6[0],\n      setToken = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      showLoader = _useState8[0],\n      setShowLoader = _useState8[1];\n\n  var navigate = useNavigate();\n\n  var handleLogOut = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              localStorage.removeItem(\"token\");\n              setToken(\"\");\n              navigate(\"/login\");\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleLogOut() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleLogin = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(username, password, setUsername, setPassword) {\n      var _yield$axios$post, data, t;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              setShowLoader(true);\n\n              if (!(checkInputField(username) === \"EMPTY\")) {\n                _context2.next = 4;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", setError(\"username cannot be empty\"));\n\n            case 4:\n              if (!(checkInputField(password) === \"EMPTY\")) {\n                _context2.next = 6;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", setError(\"password cannot be empty\"));\n\n            case 6:\n              _context2.next = 8;\n              return axios.post(LOGIN_API, {\n                username: username,\n                password: password\n              });\n\n            case 8:\n              _yield$axios$post = _context2.sent;\n              data = _yield$axios$post.data;\n              console.log(\"handleLogin\", data);\n\n              if (data.success) {\n                setShowLoader(false);\n                t = localStorage.setItem(\"token\", JSON.stringify(data.token));\n                setToken(data.token);\n                navigate(\"/products\");\n                setUsername(\"\");\n                setPassword(\"\");\n              }\n\n              _context2.next = 17;\n              break;\n\n            case 14:\n              _context2.prev = 14;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(\"handleLogin\", _context2.t0);\n\n            case 17:\n              _context2.prev = 17;\n              setShowLoader(false);\n              return _context2.finish(17);\n\n            case 20:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 14, 17, 20]]);\n    }));\n\n    return function handleLogin(_x, _x2, _x3, _x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var handleSignUp = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(username, email, password, confirmPassword, setUsername, setEmail, setPassword, setConfirmPassword) {\n      var _yield$axios$post2, data, t;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              setShowLoader(true);\n\n              if (!(checkInputField(username) === \"EMPTY\")) {\n                _context3.next = 4;\n                break;\n              }\n\n              return _context3.abrupt(\"return\", setError(\"username cannot be Empty\"));\n\n            case 4:\n              if (!(checkInputField(email) === \"EMPTY\")) {\n                _context3.next = 6;\n                break;\n              }\n\n              return _context3.abrupt(\"return\", setError(\"email cannot be Empty\"));\n\n            case 6:\n              if (!(checkInputField(password) === \"EMPTY\")) {\n                _context3.next = 8;\n                break;\n              }\n\n              return _context3.abrupt(\"return\", setError(\"password cannot be Empty\"));\n\n            case 8:\n              if (isMatch(password, confirmPassword)) {\n                _context3.next = 10;\n                break;\n              }\n\n              return _context3.abrupt(\"return\", setError(\"Password and ConfirmPassword Should Match\"));\n\n            case 10:\n              if (validateEmail(email)) {\n                _context3.next = 12;\n                break;\n              }\n\n              return _context3.abrupt(\"return\", setError(\"Enter a valid Email\"));\n\n            case 12:\n              if (validatePassword(password)) {\n                _context3.next = 14;\n                break;\n              }\n\n              return _context3.abrupt(\"return\", setError(\"Password should contain atleast 6 characters of atleast lowercase, uppercase and numeric integer\"));\n\n            case 14:\n              if (validateUsername(username)) {\n                _context3.next = 16;\n                break;\n              }\n\n              return _context3.abrupt(\"return\", setError(\"Enter a valid Username\"));\n\n            case 16:\n              _context3.next = 18;\n              return axios.post(SIGNUP_API, {\n                username: username,\n                email: email,\n                password: password\n              });\n\n            case 18:\n              _yield$axios$post2 = _context3.sent;\n              data = _yield$axios$post2.data;\n\n              if (data.success) {\n                setShowLoader(false);\n                t = localStorage.setItem(\"token\", JSON.stringify(data.token));\n                setToken(data.token);\n                setUsername(\"\");\n                setEmail(\"\");\n                setPassword(\"\");\n                setConfirmPassword(\"\");\n              }\n\n              _context3.next = 26;\n              break;\n\n            case 23:\n              _context3.prev = 23;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.log(\"handleSignUp\", _context3.t0);\n\n            case 26:\n              _context3.prev = 26;\n              setShowLoader(false);\n              return _context3.finish(26);\n\n            case 29:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 23, 26, 29]]);\n    }));\n\n    return function handleSignUp(_x5, _x6, _x7, _x8, _x9, _x10, _x11, _x12) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n    value: {\n      isLogin: isLogin,\n      handleSignUp: handleSignUp,\n      handleLogin: handleLogin,\n      handleLogOut: handleLogOut,\n      setLogin: setLogin,\n      error: error,\n      setError: setError,\n      token: token,\n      setToken: setToken,\n      showLoader: showLoader,\n      setShowLoader: setShowLoader\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 5\n    }\n  }, children);\n};","map":{"version":3,"sources":["C:/Users/HP/Documents/GitHub/TheBarakMart-An-Ecommerce-website/src/context/AuthContext.js"],"names":["React","createContext","useState","useEffect","useNavigate","axios","checkInputField","validateEmail","validatePassword","validateUsername","isMatch","SIGNUP_API","LOGIN_API","AuthContext","AuthProvider","children","JSON","parse","localStorage","getItem","token","savedToken","isLogin","setLogin","error","setError","setToken","showLoader","setShowLoader","navigate","handleLogOut","removeItem","handleLogin","username","password","setUsername","setPassword","post","data","console","log","success","t","setItem","stringify","handleSignUp","email","confirmPassword","setEmail","setConfirmPassword"],"mappings":"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","sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport {\r\n  checkInputField,\r\n  validateEmail,\r\n  validatePassword,\r\n  validateUsername,\r\n  isMatch,\r\n} from \"../utils\";\r\n\r\nimport { SIGNUP_API, LOGIN_API } from \"../urls\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const {\r\n    token: { savedToken },\r\n  } = JSON.parse(localStorage.getItem(\"token\")) || { token: null };\r\n  const [isLogin, setLogin] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [token, setToken] = useState(savedToken);\r\n  const [showLoader, setShowLoader] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const handleLogOut = async () => {\r\n    localStorage.removeItem(\"token\");\r\n    setToken(\"\");\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  const handleLogin = async (username, password, setUsername, setPassword) => {\r\n    try {\r\n      setShowLoader(true);\r\n      if (checkInputField(username) === \"EMPTY\") {\r\n        return setError(\"username cannot be empty\");\r\n      }\r\n      if (checkInputField(password) === \"EMPTY\") {\r\n        return setError(\"password cannot be empty\");\r\n      }\r\n\r\n      const { data } = await axios.post(LOGIN_API, { username, password });\r\n\r\n      console.log(\"handleLogin\", data);\r\n\r\n      if (data.success) {\r\n        setShowLoader(false);\r\n        const t = localStorage.setItem(\"token\", JSON.stringify(data.token));\r\n        setToken(data.token);\r\n        navigate(\"/products\");\r\n        setUsername(\"\");\r\n        setPassword(\"\");\r\n      }\r\n    } catch (error) {\r\n      console.log(\"handleLogin\", error);\r\n    } finally {\r\n      setShowLoader(false);\r\n    }\r\n  };\r\n\r\n  const handleSignUp = async (\r\n    username,\r\n    email,\r\n    password,\r\n    confirmPassword,\r\n    setUsername,\r\n    setEmail,\r\n    setPassword,\r\n    setConfirmPassword\r\n  ) => {\r\n    try {\r\n      setShowLoader(true);\r\n      if (checkInputField(username) === \"EMPTY\") {\r\n        return setError(`username cannot be Empty`);\r\n      }\r\n\r\n      if (checkInputField(email) === \"EMPTY\") {\r\n        return setError(`email cannot be Empty`);\r\n      }\r\n\r\n      if (checkInputField(password) === \"EMPTY\") {\r\n        return setError(`password cannot be Empty`);\r\n      }\r\n\r\n      if (!isMatch(password, confirmPassword)) {\r\n        return setError(\"Password and ConfirmPassword Should Match\");\r\n      }\r\n\r\n      if (!validateEmail(email)) {\r\n        return setError(\"Enter a valid Email\");\r\n      }\r\n\r\n      if (!validatePassword(password)) {\r\n        return setError(\r\n          \"Password should contain atleast 6 characters of atleast lowercase, uppercase and numeric integer\"\r\n        );\r\n      }\r\n\r\n      if (!validateUsername(username)) {\r\n        return setError(\"Enter a valid Username\");\r\n      }\r\n\r\n      const { data } = await axios.post(SIGNUP_API, {\r\n        username,\r\n        email,\r\n        password,\r\n      });\r\n\r\n      if (data.success) {\r\n        setShowLoader(false);\r\n        const t = localStorage.setItem(\"token\", JSON.stringify(data.token));\r\n        setToken(data.token);\r\n        setUsername(\"\");\r\n        setEmail(\"\");\r\n        setPassword(\"\");\r\n        setConfirmPassword(\"\");\r\n      }\r\n    } catch (error) {\r\n      console.log(\"handleSignUp\", error);\r\n    } finally {\r\n      setShowLoader(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        isLogin,\r\n        handleSignUp,\r\n        handleLogin,\r\n        handleLogOut,\r\n        setLogin,\r\n        error,\r\n        setError,\r\n        token,\r\n        setToken,\r\n        showLoader,\r\n        setShowLoader,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}