{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _excluded = [\"_id\"];\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\src\\\\context\\\\DataContext.js\";\n\nimport axios from \"axios\";\nimport React, { createContext, useReducer, useState } from \"react\";\nimport { reducerFunc } from \"./reducerFunc\";\nimport { GET_ALL_WISHLIST_ITEMS, GET_ALL_CART_ITEMS } from \"../urls\";\nexport var DataContext = createContext();\nexport var DataProvider = function DataProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useReducer = useReducer(reducerFunc, {\n    productList: [],\n    wishList: {},\n    cartList: {},\n    filterStates: {\n      sortBy: null,\n      includeOutOfStock: true,\n      includeFastDelivery: false\n    },\n    toast: {\n      toastMsg: \"\",\n      toastType: \"\"\n    },\n    displayComponent: \"PRODUCT\"\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var fetchProductAndAdd = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n      var url, dispatchType, listType, _yield$axios$get, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              url = _ref2.url, dispatchType = _ref2.dispatchType, listType = _ref2.listType;\n              _context.prev = 1;\n              _context.next = 4;\n              return axios.get(url);\n\n            case 4:\n              _yield$axios$get = _context.sent;\n              data = _yield$axios$get.data;\n\n              if (data.success) {\n                dispatch({\n                  type: dispatchType,\n                  payload: data[listType]\n                });\n              }\n\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(\"fetchProductAndAdd\", {\n                error: _context.t0\n              });\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9]]);\n    }));\n\n    return function fetchProductAndAdd(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var initiaizeWishlist = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref4) {\n      var url, userId, _yield$axios$post, data, response;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              url = _ref4.url, userId = _ref4.userId;\n              _context2.prev = 1;\n              setLoading(true);\n\n              if (userId) {\n                _context2.next = 7;\n                break;\n              }\n\n              state.toast.toastMsg = \"UserId not present\";\n              state.toast.toastType = \"error\";\n              return _context2.abrupt(\"return\");\n\n            case 7:\n              _context2.next = 9;\n              return axios.post(url, {\n                userId: \"\".concat(userId)\n              });\n\n            case 9:\n              _yield$axios$post = _context2.sent;\n              data = _yield$axios$post.data;\n\n              if (!data.success) {\n                _context2.next = 17;\n                break;\n              }\n\n              dispatch({\n                type: \"ADD_TO_WISHLIST\",\n                payload: data.wishList\n              });\n              _context2.next = 15;\n              return axios.get(\"\".concat(GET_ALL_WISHLIST_ITEMS, \"/\").concat(userId));\n\n            case 15:\n              response = _context2.sent;\n\n              if (response.data.success) {\n                dispatch({\n                  type: \"ADD_TO_WISHLIST\",\n                  payload: response.data.wishList\n                });\n              }\n\n            case 17:\n              setLoading(false);\n              _context2.next = 26;\n              break;\n\n            case 20:\n              _context2.prev = 20;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.log({\n                error: _context2.t0\n              });\n              state.toast.toastMsg = \"error in initiaizeWishlist\";\n              state.toast.toastType = \"error\";\n              setLoading(false);\n\n            case 26:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 20]]);\n    }));\n\n    return function initiaizeWishlist(_x2) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var initializeCartList = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref6) {\n      var url, userId, _yield$axios$post2, data, response;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              url = _ref6.url, userId = _ref6.userId;\n              _context3.prev = 1;\n              setLoading(true);\n\n              if (userId) {\n                _context3.next = 7;\n                break;\n              }\n\n              state.toast.toastMsg = \"UserId not present\";\n              state.toast.toastType = \"error\";\n              return _context3.abrupt(\"return\");\n\n            case 7:\n              _context3.next = 9;\n              return axios.post(url, {\n                userId: \"\".concat(userId)\n              });\n\n            case 9:\n              _yield$axios$post2 = _context3.sent;\n              data = _yield$axios$post2.data;\n              console.log({\n                data: data\n              });\n\n              if (!data.success) {\n                _context3.next = 19;\n                break;\n              }\n\n              dispatch({\n                type: \"ADD_TO_CART\",\n                payload: data.cartList\n              });\n              _context3.next = 16;\n              return axios.get(\"\".concat(GET_ALL_CART_ITEMS, \"/\").concat(userId));\n\n            case 16:\n              response = _context3.sent;\n              console.log({\n                response: response\n              });\n\n              if (response.data.success) {\n                dispatch({\n                  type: \"ADD_TO_CART\",\n                  payload: response.data.cartList\n                });\n              }\n\n            case 19:\n              setLoading(false);\n              _context3.next = 28;\n              break;\n\n            case 22:\n              _context3.prev = 22;\n              _context3.t0 = _context3[\"catch\"](1);\n              console.log({\n                error: _context3.t0\n              });\n              state.toast.toastMsg = \"error in initializeCartList\";\n              state.toast.toastType = \"error\";\n              setLoading(false);\n\n            case 28:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 22]]);\n    }));\n\n    return function initializeCartList(_x3) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var updateCartQuantity = /*#__PURE__*/function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref8) {\n      var url, dispatchType, productId, updateType, toastMsg, toastType, currentQuantity, idToUpdate, _yield$axios$post3, data, status;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              url = _ref8.url, dispatchType = _ref8.dispatchType, productId = _ref8.productId, updateType = _ref8.updateType, toastMsg = _ref8.toastMsg, toastType = _ref8.toastType;\n              currentQuantity = state.cartList.cartItems.find(function (product) {\n                return product._id === productId;\n              }).quantity;\n              idToUpdate = state.cartList.cartItems.find(function (product) {\n                return product._id === productId;\n              })._id; // Updating Toast\n\n              state.toast.toastMsg = toastMsg;\n              state.toast.toastType = toastType;\n              setLoading(true);\n              updateType === \"INCREMENT\" ? currentQuantity = currentQuantity + 1 : currentQuantity = currentQuantity - 1;\n              _context4.prev = 7;\n              _context4.next = 10;\n              return axios.post(\"\".concat(url, \"/\").concat(idToUpdate), {\n                product: {\n                  quantity: currentQuantity\n                }\n              });\n\n            case 10:\n              _yield$axios$post3 = _context4.sent;\n              data = _yield$axios$post3.data;\n              status = _yield$axios$post3.status;\n              console.log({\n                data: data\n              }, {\n                status: status\n              });\n\n              if (status === 200) {\n                dispatch({\n                  type: dispatchType,\n                  payload: data.cartItem.updateItem.quantity,\n                  productId: data.cartItem.updateItem.quantity,\n                  updateType: updateType\n                });\n              }\n\n              _context4.next = 20;\n              break;\n\n            case 17:\n              _context4.prev = 17;\n              _context4.t0 = _context4[\"catch\"](7);\n              console.log(\"updateCartQuantity\", {\n                error: _context4.t0\n              });\n\n            case 20:\n              _context4.prev = 20;\n              setLoading(false);\n              return _context4.finish(20);\n\n            case 23:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[7, 17, 20, 23]]);\n    }));\n\n    return function updateCartQuantity(_x4) {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n\n  var addProductToDb = /*#__PURE__*/function () {\n    var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(_ref10) {\n      var url, listType, dispatchType, productId, updateType, toastMsg, toastType, _state$productList$fi, _id, itemNoId, _yield$axios$post4, data, status;\n\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              url = _ref10.url, listType = _ref10.listType, dispatchType = _ref10.dispatchType, productId = _ref10.productId, updateType = _ref10.updateType, toastMsg = _ref10.toastMsg, toastType = _ref10.toastType;\n              _context5.prev = 1;\n              _state$productList$fi = state.productList.filter(function (product) {\n                return product._id === productId;\n              })[0], _id = _state$productList$fi._id, itemNoId = _objectWithoutProperties(_state$productList$fi, _excluded); // Updating Toast\n\n              state.toast.toastMsg = toastMsg;\n              state.toast.toastType = toastType;\n              setLoading(true);\n              console.log({\n                _id: _id\n              }, {\n                itemNoId: itemNoId\n              });\n              _context5.next = 9;\n              return axios.post(\"\".concat(url), {\n                product: _objectSpread({}, itemNoId)\n              });\n\n            case 9:\n              _yield$axios$post4 = _context5.sent;\n              data = _yield$axios$post4.data;\n              status = _yield$axios$post4.status;\n\n              if (status === 201) {\n                dispatch({\n                  type: dispatchType,\n                  payload: data[listType],\n                  productId: productId,\n                  updateType: updateType\n                });\n              }\n\n              _context5.next = 18;\n              break;\n\n            case 15:\n              _context5.prev = 15;\n              _context5.t0 = _context5[\"catch\"](1);\n              console.log(\"addProductToDb\", _context5.t0);\n\n            case 18:\n              _context5.prev = 18;\n              console.log(\"FROM FINALLY ADD\", {\n                isLoading: isLoading\n              });\n              setLoading(false);\n              return _context5.finish(18);\n\n            case 22:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[1, 15, 18, 22]]);\n    }));\n\n    return function addProductToDb(_x5) {\n      return _ref11.apply(this, arguments);\n    };\n  }();\n\n  var removeProductFromDb = /*#__PURE__*/function () {\n    var _ref13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(_ref12) {\n      var url, listType, dispatchType, productId, updateType, toastMsg, toastType, idToDelete, response;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              url = _ref12.url, listType = _ref12.listType, dispatchType = _ref12.dispatchType, productId = _ref12.productId, updateType = _ref12.updateType, toastMsg = _ref12.toastMsg, toastType = _ref12.toastType;\n              _context6.prev = 1;\n              idToDelete = state[listType].filter(function (item) {\n                return item._id === productId;\n              })[0]._id; // Updating Toast\n\n              state.toast.toastMsg = toastMsg;\n              state.toast.toastType = toastType;\n              setLoading(true);\n              _context6.next = 8;\n              return axios.delete(\"\".concat(url, \"/\").concat(idToDelete));\n\n            case 8:\n              response = _context6.sent;\n\n              if (response.status === 204) {\n                dispatch({\n                  type: dispatchType,\n                  productId: productId,\n                  updateType: updateType\n                });\n              }\n\n              _context6.next = 15;\n              break;\n\n            case 12:\n              _context6.prev = 12;\n              _context6.t0 = _context6[\"catch\"](1);\n              console.log(\"removeProductFromDb\", _context6.t0);\n\n            case 15:\n              _context6.prev = 15;\n              console.log(\"FROM FINALLY DELETE\", {\n                isLoading: isLoading\n              });\n              setLoading(false);\n              return _context6.finish(15);\n\n            case 19:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, null, [[1, 12, 15, 19]]);\n    }));\n\n    return function removeProductFromDb(_x6) {\n      return _ref13.apply(this, arguments);\n    };\n  }();\n\n  var addProductToCart = /*#__PURE__*/function () {\n    var _ref15 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(_ref14) {\n      var url, productId, toastMsg, toastType, response;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              url = _ref14.url, productId = _ref14.productId, toastMsg = _ref14.toastMsg, toastType = _ref14.toastType;\n              _context7.prev = 1;\n              setLoading(true);\n              _context7.next = 5;\n              return axios.post(\"\".concat(url), {\n                product: {\n                  _id: productId,\n                  quantity: 1\n                }\n              });\n\n            case 5:\n              response = _context7.sent;\n              // Updating Toast\n              state.toast.toastMsg = toastMsg;\n              state.toast.toastType = toastType;\n\n              if (response.data.success) {\n                dispatch({\n                  type: \"ADD_PRODUCT_TO_CART\",\n                  payload: response.data.cartList,\n                  productId: productId\n                });\n              }\n\n              setLoading(false);\n              _context7.next = 14;\n              break;\n\n            case 12:\n              _context7.prev = 12;\n              _context7.t0 = _context7[\"catch\"](1);\n\n            case 14:\n              _context7.prev = 14;\n              setLoading(false);\n              return _context7.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, null, [[1, 12, 14, 17]]);\n    }));\n\n    return function addProductToCart(_x7) {\n      return _ref15.apply(this, arguments);\n    };\n  }();\n\n  var removeProductFromCart = /*#__PURE__*/function () {\n    var _ref17 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(_ref16) {\n      var url, productId, toastMsg, toastType, response;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              url = _ref16.url, productId = _ref16.productId, toastMsg = _ref16.toastMsg, toastType = _ref16.toastType;\n              _context8.prev = 1;\n              _context8.next = 4;\n              return axios.delete(\"\".concat(url, \"/\").concat(productId));\n\n            case 4:\n              response = _context8.sent;\n              // Updating Toast\n              state.toast.toastMsg = toastMsg;\n              state.toast.toastType = toastType;\n              setLoading(true);\n\n              if (response.data.success) {\n                dispatch({\n                  type: \"REMOVE_PRODUCT_FROM_CART\",\n                  productId: productId\n                });\n              }\n\n              _context8.next = 15;\n              break;\n\n            case 11:\n              _context8.prev = 11;\n              _context8.t0 = _context8[\"catch\"](1);\n              console.log(\"removeProductFromDb\", _context8.t0);\n              setLoading(false);\n\n            case 15:\n              _context8.prev = 15;\n              setLoading(false);\n              return _context8.finish(15);\n\n            case 18:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8, null, [[1, 11, 15, 18]]);\n    }));\n\n    return function removeProductFromCart(_x8) {\n      return _ref17.apply(this, arguments);\n    };\n  }();\n\n  var addProductToWishlist = /*#__PURE__*/function () {\n    var _ref19 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(_ref18) {\n      var url, productId, toastMsg, toastType, response;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              url = _ref18.url, productId = _ref18.productId, toastMsg = _ref18.toastMsg, toastType = _ref18.toastType;\n              _context9.prev = 1;\n              // Updating Toast\n              state.toast.toastMsg = toastMsg;\n              state.toast.toastType = toastType;\n              setLoading(true);\n              _context9.next = 7;\n              return axios.post(url, {\n                product: productId\n              });\n\n            case 7:\n              response = _context9.sent;\n\n              if (response.data.success) {\n                dispatch({\n                  type: \"ADD_PRODUCT_TO_WISHLIST\",\n                  productId: productId,\n                  payload: response.data.wishList\n                });\n                setLoading(false);\n              }\n\n              _context9.next = 14;\n              break;\n\n            case 11:\n              _context9.prev = 11;\n              _context9.t0 = _context9[\"catch\"](1);\n              console.log(\"addProductToDb\", _context9.t0);\n\n            case 14:\n              _context9.prev = 14;\n              console.log(\"FROM FINALLY ADD\", {\n                isLoading: isLoading\n              });\n              setLoading(false);\n              return _context9.finish(14);\n\n            case 18:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9, null, [[1, 11, 14, 18]]);\n    }));\n\n    return function addProductToWishlist(_x9) {\n      return _ref19.apply(this, arguments);\n    };\n  }();\n\n  var removeProductFromWishlist = /*#__PURE__*/function () {\n    var _ref21 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(_ref20) {\n      var url, productId, toastMsg, toastType, response;\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              url = _ref20.url, productId = _ref20.productId, toastMsg = _ref20.toastMsg, toastType = _ref20.toastType;\n              _context10.prev = 1;\n              _context10.next = 4;\n              return axios.delete(\"\".concat(url, \"/\").concat(productId), {\n                productId: productId\n              });\n\n            case 4:\n              response = _context10.sent;\n              console.log({\n                state: state\n              }); // Updating Toast\n\n              state.toast.toastMsg = toastMsg;\n              state.toast.toastType = toastType;\n              setLoading(true);\n\n              if (response.data.success) {\n                dispatch({\n                  type: \"REMOVE_PRODUCT_FROM_WISHLIST\",\n                  productId: productId\n                });\n                setLoading(false);\n              }\n\n              _context10.next = 16;\n              break;\n\n            case 12:\n              _context10.prev = 12;\n              _context10.t0 = _context10[\"catch\"](1);\n              console.log(\"removeProductFromDb\", {\n                error: _context10.t0\n              });\n              setLoading(false);\n\n            case 16:\n              _context10.prev = 16;\n              setLoading(false);\n              return _context10.finish(16);\n\n            case 19:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10, null, [[1, 12, 16, 19]]);\n    }));\n\n    return function removeProductFromWishlist(_x10) {\n      return _ref21.apply(this, arguments);\n    };\n  }(); // console.log(\"useDataCONtext\", { state });\n\n\n  return /*#__PURE__*/React.createElement(DataContext.Provider, {\n    value: {\n      state: state,\n      dispatch: dispatch,\n      fetchProductAndAdd: fetchProductAndAdd,\n      updateCartQuantity: updateCartQuantity,\n      addProductToDb: addProductToDb,\n      removeProductFromDb: removeProductFromDb,\n      isLoading: isLoading,\n      addProductToCart: addProductToCart,\n      removeProductFromCart: removeProductFromCart,\n      addProductToWishlist: addProductToWishlist,\n      removeProductFromWishlist: removeProductFromWishlist,\n      initiaizeWishlist: initiaizeWishlist,\n      initializeCartList: initializeCartList\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 5\n    }\n  }, children);\n};","map":{"version":3,"sources":["C:/Users/HP/Documents/GitHub/TheBarakMart-An-Ecommerce-website/src/context/DataContext.js"],"names":["axios","React","createContext","useReducer","useState","reducerFunc","GET_ALL_WISHLIST_ITEMS","GET_ALL_CART_ITEMS","DataContext","DataProvider","children","isLoading","setLoading","productList","wishList","cartList","filterStates","sortBy","includeOutOfStock","includeFastDelivery","toast","toastMsg","toastType","displayComponent","state","dispatch","fetchProductAndAdd","url","dispatchType","listType","get","data","success","type","payload","console","log","error","initiaizeWishlist","userId","post","response","initializeCartList","updateCartQuantity","productId","updateType","currentQuantity","cartItems","find","product","_id","quantity","idToUpdate","status","cartItem","updateItem","addProductToDb","filter","itemNoId","removeProductFromDb","idToDelete","item","delete","addProductToCart","removeProductFromCart","addProductToWishlist","removeProductFromWishlist"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React, { createContext, useReducer, useState } from \"react\";\r\nimport { reducerFunc } from \"./reducerFunc\";\r\n\r\nimport { GET_ALL_WISHLIST_ITEMS, GET_ALL_CART_ITEMS } from \"../urls\";\r\n\r\nexport const DataContext = createContext();\r\n\r\nexport const DataProvider = ({ children }) => {\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  const [state, dispatch] = useReducer(reducerFunc, {\r\n    productList: [],\r\n    wishList: {},\r\n    cartList: {},\r\n    filterStates: {\r\n      sortBy: null,\r\n      includeOutOfStock: true,\r\n      includeFastDelivery: false,\r\n    },\r\n\r\n    toast: {\r\n      toastMsg: \"\",\r\n      toastType: \"\",\r\n    },\r\n    displayComponent: \"PRODUCT\",\r\n  });\r\n\r\n  const fetchProductAndAdd = async ({ url, dispatchType, listType }) => {\r\n    try {\r\n      const { data } = await axios.get(url);\r\n      if (data.success) {\r\n        dispatch({ type: dispatchType, payload: data[listType] });\r\n      }\r\n    } catch (error) {\r\n      console.log(\"fetchProductAndAdd\", { error });\r\n    }\r\n  };\r\n\r\n  const initiaizeWishlist = async ({ url, userId }) => {\r\n    try {\r\n      setLoading(true);\r\n      if (!userId) {\r\n        state.toast.toastMsg = \"UserId not present\";\r\n        state.toast.toastType = \"error\";\r\n        return;\r\n      }\r\n\r\n      const { data } = await axios.post(url, { userId: `${userId}` });\r\n\r\n      if (data.success) {\r\n        dispatch({\r\n          type: \"ADD_TO_WISHLIST\",\r\n          payload: data.wishList,\r\n        });\r\n\r\n        const response = await axios.get(`${GET_ALL_WISHLIST_ITEMS}/${userId}`);\r\n\r\n        if (response.data.success) {\r\n          dispatch({\r\n            type: \"ADD_TO_WISHLIST\",\r\n            payload: response.data.wishList,\r\n          });\r\n        }\r\n      }\r\n\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log({ error });\r\n      state.toast.toastMsg = \"error in initiaizeWishlist\";\r\n      state.toast.toastType = \"error\";\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const initializeCartList = async ({ url, userId }) => {\r\n    try {\r\n      setLoading(true);\r\n      if (!userId) {\r\n        state.toast.toastMsg = \"UserId not present\";\r\n        state.toast.toastType = \"error\";\r\n        return;\r\n      }\r\n      const { data } = await axios.post(url, { userId: `${userId}` });\r\n\r\n      console.log({ data });\r\n\r\n      if (data.success) {\r\n        dispatch({\r\n          type: \"ADD_TO_CART\",\r\n          payload: data.cartList,\r\n        });\r\n\r\n        const response = await axios.get(`${GET_ALL_CART_ITEMS}/${userId}`);\r\n\r\n        console.log({ response });\r\n\r\n        if (response.data.success) {\r\n          dispatch({\r\n            type: \"ADD_TO_CART\",\r\n            payload: response.data.cartList,\r\n          });\r\n        }\r\n      }\r\n\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log({ error });\r\n      state.toast.toastMsg = \"error in initializeCartList\";\r\n      state.toast.toastType = \"error\";\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateCartQuantity = async ({\r\n    url,\r\n    dispatchType,\r\n    productId,\r\n    updateType,\r\n    toastMsg,\r\n    toastType,\r\n  }) => {\r\n    let currentQuantity = state.cartList.cartItems.find(\r\n      (product) => product._id === productId\r\n    ).quantity;\r\n\r\n    const idToUpdate = state.cartList.cartItems.find(\r\n      (product) => product._id === productId\r\n    )._id;\r\n\r\n    // Updating Toast\r\n    state.toast.toastMsg = toastMsg;\r\n    state.toast.toastType = toastType;\r\n\r\n    setLoading(true);\r\n\r\n    updateType === \"INCREMENT\"\r\n      ? (currentQuantity = currentQuantity + 1)\r\n      : (currentQuantity = currentQuantity - 1);\r\n\r\n    try {\r\n      const { data, status } = await axios.post(`${url}/${idToUpdate}`, {\r\n        product: { quantity: currentQuantity },\r\n      });\r\n\r\n      console.log({ data }, { status });\r\n\r\n      if (status === 200) {\r\n        dispatch({\r\n          type: dispatchType,\r\n          payload: data.cartItem.updateItem.quantity,\r\n          productId: data.cartItem.updateItem.quantity,\r\n          updateType: updateType,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(\"updateCartQuantity\", { error });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const addProductToDb = async ({\r\n    url,\r\n    listType,\r\n    dispatchType,\r\n    productId,\r\n    updateType,\r\n    toastMsg,\r\n    toastType,\r\n  }) => {\r\n    try {\r\n      const { _id, ...itemNoId } = state.productList.filter(\r\n        (product) => product._id === productId\r\n      )[0];\r\n\r\n      // Updating Toast\r\n      state.toast.toastMsg = toastMsg;\r\n      state.toast.toastType = toastType;\r\n\r\n      setLoading(true);\r\n\r\n      console.log({ _id }, { itemNoId });\r\n\r\n      const { data, status } = await axios.post(`${url}`, {\r\n        product: { ...itemNoId },\r\n      });\r\n\r\n      if (status === 201) {\r\n        dispatch({\r\n          type: dispatchType,\r\n          payload: data[listType],\r\n          productId: productId,\r\n          updateType: updateType,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(\"addProductToDb\", error);\r\n    } finally {\r\n      console.log(\"FROM FINALLY ADD\", { isLoading });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const removeProductFromDb = async ({\r\n    url,\r\n    listType,\r\n    dispatchType,\r\n    productId,\r\n    updateType,\r\n    toastMsg,\r\n    toastType,\r\n  }) => {\r\n    try {\r\n      const idToDelete = state[listType].filter(\r\n        (item) => item._id === productId\r\n      )[0]._id;\r\n\r\n      // Updating Toast\r\n      state.toast.toastMsg = toastMsg;\r\n      state.toast.toastType = toastType;\r\n\r\n      setLoading(true);\r\n\r\n      const response = await axios.delete(`${url}/${idToDelete}`);\r\n\r\n      if (response.status === 204) {\r\n        dispatch({\r\n          type: dispatchType,\r\n          productId: productId,\r\n          updateType: updateType,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(\"removeProductFromDb\", error);\r\n    } finally {\r\n      console.log(\"FROM FINALLY DELETE\", { isLoading });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const addProductToCart = async ({ url, productId, toastMsg, toastType }) => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      const response = await axios.post(`${url}`, {\r\n        product: { _id: productId, quantity: 1 },\r\n      });\r\n\r\n      // Updating Toast\r\n      state.toast.toastMsg = toastMsg;\r\n      state.toast.toastType = toastType;\r\n\r\n      if (response.data.success) {\r\n        dispatch({\r\n          type: \"ADD_PRODUCT_TO_CART\",\r\n          payload: response.data.cartList,\r\n          productId: productId,\r\n        });\r\n      }\r\n\r\n      setLoading(false);\r\n    } catch (error) {\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const removeProductFromCart = async ({\r\n    url,\r\n    productId,\r\n    toastMsg,\r\n    toastType,\r\n  }) => {\r\n    try {\r\n      const response = await axios.delete(`${url}/${productId}`);\r\n\r\n      // Updating Toast\r\n      state.toast.toastMsg = toastMsg;\r\n      state.toast.toastType = toastType;\r\n\r\n      setLoading(true);\r\n\r\n      if (response.data.success) {\r\n        dispatch({\r\n          type: \"REMOVE_PRODUCT_FROM_CART\",\r\n          productId: productId,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(\"removeProductFromDb\", error);\r\n      setLoading(false);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const addProductToWishlist = async ({\r\n    url,\r\n    productId,\r\n    toastMsg,\r\n    toastType,\r\n  }) => {\r\n    try {\r\n      // Updating Toast\r\n      state.toast.toastMsg = toastMsg;\r\n      state.toast.toastType = toastType;\r\n\r\n      setLoading(true);\r\n\r\n      const response = await axios.post(url, {\r\n        product: productId,\r\n      });\r\n\r\n      if (response.data.success) {\r\n        dispatch({\r\n          type: \"ADD_PRODUCT_TO_WISHLIST\",\r\n          productId: productId,\r\n          payload: response.data.wishList,\r\n        });\r\n        setLoading(false);\r\n      }\r\n    } catch (error) {\r\n      console.log(\"addProductToDb\", error);\r\n    } finally {\r\n      console.log(\"FROM FINALLY ADD\", { isLoading });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const removeProductFromWishlist = async ({\r\n    url,\r\n    productId,\r\n    toastMsg,\r\n    toastType,\r\n  }) => {\r\n    try {\r\n      const response = await axios.delete(`${url}/${productId}`, {\r\n        productId: productId,\r\n      });\r\n\r\n      console.log({ state });\r\n\r\n      // Updating Toast\r\n      state.toast.toastMsg = toastMsg;\r\n      state.toast.toastType = toastType;\r\n\r\n      setLoading(true);\r\n\r\n      if (response.data.success) {\r\n        dispatch({\r\n          type: \"REMOVE_PRODUCT_FROM_WISHLIST\",\r\n          productId: productId,\r\n        });\r\n        setLoading(false);\r\n      }\r\n    } catch (error) {\r\n      console.log(\"removeProductFromDb\", { error });\r\n      setLoading(false);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // console.log(\"useDataCONtext\", { state });\r\n\r\n  return (\r\n    <DataContext.Provider\r\n      value={{\r\n        state,\r\n        dispatch,\r\n        fetchProductAndAdd,\r\n        updateCartQuantity,\r\n        addProductToDb,\r\n        removeProductFromDb,\r\n        isLoading,\r\n        addProductToCart,\r\n        removeProductFromCart,\r\n        addProductToWishlist,\r\n        removeProductFromWishlist,\r\n        initiaizeWishlist,\r\n        initializeCartList,\r\n      }}\r\n    >\r\n      {children}\r\n    </DataContext.Provider>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}