{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\src\\\\context\\\\AuthContext.js\";\n\nimport React, { useContext, createContext, useState, useEffect } from \"react\";\nimport { FakeAuthApi } from \"../api/fakeAuthApi\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { useUserContext } from \"./UserContext\";\nexport var AuthContext = createContext();\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLogin = _useState2[0],\n      setLogin = _useState2[1];\n\n  var navigate = useNavigate();\n\n  var _useLocation = useLocation(),\n      state = _useLocation.state;\n\n  var _useUserContext = useUserContext(),\n      users = _useUserContext.state.users;\n\n  useEffect(function () {\n    var _localStorage;\n\n    var loginStatus = JSON.parse((_localStorage = localStorage) === null || _localStorage === void 0 ? void 0 : _localStorage.getItem(\"login\"));\n    (loginStatus === null || loginStatus === void 0 ? void 0 : loginStatus.isUserLoggedIn) ? setLogin(true) : setLogin(false);\n  }, []);\n\n  var handleUserCredentials = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(userName, password) {\n      var response, _localStorage2, item;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return FakeAuthApi(userName, password, users);\n\n            case 3:\n              response = _context.sent;\n\n              if (response.success) {\n                setLogin(true);\n                item = (_localStorage2 = localStorage) === null || _localStorage2 === void 0 ? void 0 : _localStorage2.setItem(\"login\", JSON.stringify({\n                  isUserLoggedIn: true\n                }));\n                navigate((state === null || state === void 0 ? void 0 : state.from) ? state.from : \"/products\");\n              }\n\n              _context.next = 11;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              alert(\"please enter correct username and password, check useAuthContext\");\n              console.log(_context.t0);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function handleUserCredentials(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n    value: {\n      isLogin: isLogin,\n      handleUserCredentials: handleUserCredentials,\n      setLogin: setLogin\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, children);\n};","map":{"version":3,"sources":["C:/Users/HP/Documents/GitHub/TheBarakMart-An-Ecommerce-website/src/context/AuthContext.js"],"names":["React","useContext","createContext","useState","useEffect","FakeAuthApi","useNavigate","useLocation","useUserContext","AuthContext","AuthProvider","children","isLogin","setLogin","navigate","state","users","loginStatus","JSON","parse","localStorage","getItem","isUserLoggedIn","handleUserCredentials","userName","password","response","success","item","setItem","stringify","from","alert","console","log"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,aAA5B,EAA2CC,QAA3C,EAAqDC,SAArD,QAAsE,OAAtE;AACA,SAASC,WAAT,QAA4B,oBAA5B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,kBAAzC;AACA,SAASC,cAAT,QAA+B,eAA/B;AAEA,OAAO,IAAMC,WAAW,GAAGP,aAAa,EAAjC;AAEP,OAAO,IAAMQ,YAAY,GAAG,SAAfA,YAAe,OAAkB;AAAA,MAAfC,QAAe,QAAfA,QAAe;;AAC5C,kBAA4BR,QAAQ,CAAC,KAAD,CAApC;AAAA;AAAA,MAAOS,OAAP;AAAA,MAAgBC,QAAhB;;AACA,MAAMC,QAAQ,GAAGR,WAAW,EAA5B;;AACA,qBAAkBC,WAAW,EAA7B;AAAA,MAAQQ,KAAR,gBAAQA,KAAR;;AACA,wBAEIP,cAAc,EAFlB;AAAA,MACWQ,KADX,mBACED,KADF,CACWC,KADX;;AAIAZ,EAAAA,SAAS,CAAC,YAAM;AAAA;;AACd,QAAMa,WAAW,GAAGC,IAAI,CAACC,KAAL,kBAAWC,YAAX,kDAAW,cAAcC,OAAd,CAAsB,OAAtB,CAAX,CAApB;AAEA,KAAAJ,WAAW,SAAX,IAAAA,WAAW,WAAX,YAAAA,WAAW,CAAEK,cAAb,IAA8BT,QAAQ,CAAC,IAAD,CAAtC,GAA+CA,QAAQ,CAAC,KAAD,CAAvD;AACD,GAJQ,EAIN,EAJM,CAAT;;AAMA,MAAMU,qBAAqB;AAAA,yEAAG,iBAAOC,QAAP,EAAiBC,QAAjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEHpB,WAAW,CAACmB,QAAD,EAAWC,QAAX,EAAqBT,KAArB,CAFR;;AAAA;AAEpBU,cAAAA,QAFoB;;AAI1B,kBAAIA,QAAQ,CAACC,OAAb,EAAsB;AACpBd,gBAAAA,QAAQ,CAAC,IAAD,CAAR;AACMe,gBAAAA,IAFc,qBAEPR,YAFO,mDAEP,eAAcS,OAAd,CACX,OADW,EAEXX,IAAI,CAACY,SAAL,CAAe;AAAER,kBAAAA,cAAc,EAAE;AAAlB,iBAAf,CAFW,CAFO;AAMpBR,gBAAAA,QAAQ,CAAC,CAAAC,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEgB,IAAP,IAAchB,KAAK,CAACgB,IAApB,GAA2B,WAA5B,CAAR;AACD;;AAXyB;AAAA;;AAAA;AAAA;AAAA;AAa1BC,cAAAA,KAAK,CAAC,kEAAD,CAAL;AACAC,cAAAA,OAAO,CAACC,GAAR;;AAd0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAArBX,qBAAqB;AAAA;AAAA;AAAA,KAA3B;;AAkBA,sBACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAAEX,MAAAA,OAAO,EAAPA,OAAF;AAAWW,MAAAA,qBAAqB,EAArBA,qBAAX;AAAkCV,MAAAA,QAAQ,EAARA;AAAlC,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGF,QADH,CADF;AAKD,CArCM","sourcesContent":["import React, { useContext, createContext, useState, useEffect } from \"react\";\r\nimport { FakeAuthApi } from \"../api/fakeAuthApi\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport { useUserContext } from \"./UserContext\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [isLogin, setLogin] = useState(false);\r\n  const navigate = useNavigate();\r\n  const { state } = useLocation();\r\n  const {\r\n    state: { users },\r\n  } = useUserContext();\r\n\r\n  useEffect(() => {\r\n    const loginStatus = JSON.parse(localStorage?.getItem(\"login\"));\r\n\r\n    loginStatus?.isUserLoggedIn ? setLogin(true) : setLogin(false);\r\n  }, []);\r\n\r\n  const handleUserCredentials = async (userName, password) => {\r\n    try {\r\n      const response = await FakeAuthApi(userName, password, users);\r\n\r\n      if (response.success) {\r\n        setLogin(true);\r\n        const item = localStorage?.setItem(\r\n          \"login\",\r\n          JSON.stringify({ isUserLoggedIn: true })\r\n        );\r\n        navigate(state?.from ? state.from : \"/products\");\r\n      }\r\n    } catch (error) {\r\n      alert(\"please enter correct username and password, check useAuthContext\");\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ isLogin, handleUserCredentials, setLogin }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}