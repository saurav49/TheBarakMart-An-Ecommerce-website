{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _excluded = [\"_id\"];\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\src\\\\context\\\\DataContext.js\";\n\nimport axios from \"axios\";\nimport React, { createContext, useReducer, useState } from \"react\";\nimport { reducerFunc } from \"./reducerFunc\";\nexport var DataContext = createContext();\nexport var DataProvider = function DataProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useReducer = useReducer(reducerFunc, {\n    productList: [],\n    wishList: [],\n    cartList: [],\n    filterStates: {\n      sortBy: null,\n      includeOutOfStock: true,\n      includeFastDelivery: false\n    },\n    loadingStatus: false,\n    toast: {\n      toastMsg: \"\",\n      toastType: \"\"\n    },\n    displayComponent: \"PRODUCT\"\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var fetchProductAndAdd = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n      var url, dispatchType, listType, _yield$axios$get, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              url = _ref2.url, dispatchType = _ref2.dispatchType, listType = _ref2.listType;\n              _context.prev = 1;\n              _context.next = 4;\n              return axios.get(url);\n\n            case 4:\n              _yield$axios$get = _context.sent;\n              data = _yield$axios$get.data;\n              console.log({\n                data: data\n              });\n\n              if (data.success) {\n                dispatch({\n                  type: dispatchType,\n                  payload: data[listType]\n                });\n              }\n\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(\"fetchProductAndAdd\", _context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 10]]);\n    }));\n\n    return function fetchProductAndAdd(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var updateCartQuantity = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref4) {\n      var url, dispatchType, productId, updateType, toastMsg, toastType, currentQuantity, idToUpdate, _yield$axios$post, data, status;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              url = _ref4.url, dispatchType = _ref4.dispatchType, productId = _ref4.productId, updateType = _ref4.updateType, toastMsg = _ref4.toastMsg, toastType = _ref4.toastType;\n              currentQuantity = state.cartList.filter(function (product) {\n                return product._id === productId;\n              })[0].quantity;\n              idToUpdate = state.cartList.filter(function (product) {\n                return product._id === productId;\n              })[0]._id; // Updating Toast\n\n              state.toast.toastMsg = toastMsg;\n              state.toast.toastType = toastType;\n              setLoading(true);\n              updateType === \"INCREMENT\" ? currentQuantity = currentQuantity + 1 : currentQuantity = currentQuantity - 1;\n              _context2.prev = 7;\n              _context2.next = 10;\n              return axios.post(\"\".concat(url, \"/\").concat(idToUpdate), {\n                product: {\n                  quantity: currentQuantity\n                }\n              });\n\n            case 10:\n              _yield$axios$post = _context2.sent;\n              data = _yield$axios$post.data;\n              status = _yield$axios$post.status;\n              console.log({\n                data: data\n              }, {\n                status: status\n              });\n\n              if (status === 200) {\n                dispatch({\n                  type: dispatchType,\n                  payload: data.cartItem.quantity,\n                  productId: productId,\n                  updateType: updateType\n                });\n              }\n\n              _context2.next = 20;\n              break;\n\n            case 17:\n              _context2.prev = 17;\n              _context2.t0 = _context2[\"catch\"](7);\n              console.log(\"updateCartQuantity\", {\n                error: _context2.t0\n              });\n\n            case 20:\n              _context2.prev = 20;\n              setLoading(false);\n              return _context2.finish(20);\n\n            case 23:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[7, 17, 20, 23]]);\n    }));\n\n    return function updateCartQuantity(_x2) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var addProductToDb = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref6) {\n      var url, listType, dispatchType, productId, updateType, toastMsg, toastType, _state$productList$fi, _id, itemNoId, _yield$axios$post2, data, status;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              url = _ref6.url, listType = _ref6.listType, dispatchType = _ref6.dispatchType, productId = _ref6.productId, updateType = _ref6.updateType, toastMsg = _ref6.toastMsg, toastType = _ref6.toastType;\n              _context3.prev = 1;\n              _state$productList$fi = state.productList.filter(function (product) {\n                return product._id === productId;\n              })[0], _id = _state$productList$fi._id, itemNoId = _objectWithoutProperties(_state$productList$fi, _excluded); // Updating Toast\n\n              state.toast.toastMsg = toastMsg;\n              state.toast.toastType = toastType;\n              setLoading(true);\n              console.log({\n                _id: _id\n              }, {\n                itemNoId: itemNoId\n              });\n              _context3.next = 9;\n              return axios.post(\"\".concat(url), {\n                product: _objectSpread({}, itemNoId)\n              });\n\n            case 9:\n              _yield$axios$post2 = _context3.sent;\n              data = _yield$axios$post2.data;\n              status = _yield$axios$post2.status;\n\n              if (status === 201) {\n                dispatch({\n                  type: dispatchType,\n                  payload: data[listType],\n                  productId: productId,\n                  updateType: updateType\n                });\n              }\n\n              _context3.next = 18;\n              break;\n\n            case 15:\n              _context3.prev = 15;\n              _context3.t0 = _context3[\"catch\"](1);\n              console.log(\"addProductToDb\", _context3.t0);\n\n            case 18:\n              _context3.prev = 18;\n              console.log(\"FROM FINALLY ADD\", {\n                isLoading: isLoading\n              });\n              setLoading(false);\n              return _context3.finish(18);\n\n            case 22:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 15, 18, 22]]);\n    }));\n\n    return function addProductToDb(_x3) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var removeProductFromDb = /*#__PURE__*/function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref8) {\n      var url, listType, dispatchType, productId, updateType, toastMsg, toastType, idToDelete, response;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              url = _ref8.url, listType = _ref8.listType, dispatchType = _ref8.dispatchType, productId = _ref8.productId, updateType = _ref8.updateType, toastMsg = _ref8.toastMsg, toastType = _ref8.toastType;\n              _context4.prev = 1;\n              idToDelete = state[listType].filter(function (item) {\n                return item._id === productId;\n              })[0]._id; // Updating Toast\n\n              state.toast.toastMsg = toastMsg;\n              state.toast.toastType = toastType;\n              setLoading(true);\n              _context4.next = 8;\n              return axios.delete(\"\".concat(url, \"/\").concat(idToDelete));\n\n            case 8:\n              response = _context4.sent;\n\n              if (response.status === 204) {\n                dispatch({\n                  type: dispatchType,\n                  productId: productId,\n                  updateType: updateType\n                });\n              }\n\n              _context4.next = 15;\n              break;\n\n            case 12:\n              _context4.prev = 12;\n              _context4.t0 = _context4[\"catch\"](1);\n              console.log(\"removeProductFromDb\", _context4.t0);\n\n            case 15:\n              _context4.prev = 15;\n              console.log(\"FROM FINALLY DELETE\", {\n                isLoading: isLoading\n              });\n              setLoading(false);\n              return _context4.finish(15);\n\n            case 19:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[1, 12, 15, 19]]);\n    }));\n\n    return function removeProductFromDb(_x4) {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n\n  var addProductToCart = /*#__PURE__*/function () {\n    var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(_ref10) {\n      var url, productId, toastMsg, toastType, response;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              url = _ref10.url, productId = _ref10.productId, toastMsg = _ref10.toastMsg, toastType = _ref10.toastType;\n              _context5.prev = 1;\n              _context5.next = 4;\n              return axios.post(\"\".concat(url), {\n                product: {\n                  _id: productId,\n                  quantity: 1\n                }\n              });\n\n            case 4:\n              response = _context5.sent;\n              // Updating Toast\n              state.toast.toastMsg = toastMsg;\n              state.toast.toastType = toastType;\n              setLoading(true);\n\n              if (response.data.success) {\n                dispatch({\n                  type: \"ADD_PRODUCT_TO_CART\",\n                  payload: response.data.cartItem,\n                  productId: productId\n                });\n                fetchProductAndAdd({\n                  url: \"\".concat(url),\n                  dispatchType: \"ADD_TO_CART\",\n                  listType: \"cartList\"\n                });\n              }\n\n              _context5.next = 13;\n              break;\n\n            case 11:\n              _context5.prev = 11;\n              _context5.t0 = _context5[\"catch\"](1);\n\n            case 13:\n              _context5.prev = 13;\n              setLoading(false);\n              return _context5.finish(13);\n\n            case 16:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[1, 11, 13, 16]]);\n    }));\n\n    return function addProductToCart(_x5) {\n      return _ref11.apply(this, arguments);\n    };\n  }();\n\n  var removeProductFromCart = /*#__PURE__*/function () {\n    var _ref13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(_ref12) {\n      var url, productId, toastMsg, toastType, response;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              url = _ref12.url, productId = _ref12.productId, toastMsg = _ref12.toastMsg, toastType = _ref12.toastType;\n              _context6.prev = 1;\n              _context6.next = 4;\n              return axios.delete(\"\".concat(url, \"/\").concat(productId));\n\n            case 4:\n              response = _context6.sent;\n              // Updating Toast\n              state.toast.toastMsg = toastMsg;\n              state.toast.toastType = toastType;\n              setLoading(true);\n\n              if (response.data.success) {\n                dispatch({\n                  type: \"REMOVE_PRODUCT_FROM_CART\",\n                  productId: productId\n                });\n              }\n\n              _context6.next = 15;\n              break;\n\n            case 11:\n              _context6.prev = 11;\n              _context6.t0 = _context6[\"catch\"](1);\n              console.log(\"removeProductFromDb\", _context6.t0);\n              setLoading(false);\n\n            case 15:\n              _context6.prev = 15;\n              setLoading(false);\n              return _context6.finish(15);\n\n            case 18:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, null, [[1, 11, 15, 18]]);\n    }));\n\n    return function removeProductFromCart(_x6) {\n      return _ref13.apply(this, arguments);\n    };\n  }();\n\n  var addProductToWishlist = /*#__PURE__*/function () {\n    var _ref15 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(_ref14) {\n      var url, productId, toastMsg, toastType, response;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              url = _ref14.url, productId = _ref14.productId, toastMsg = _ref14.toastMsg, toastType = _ref14.toastType;\n              _context7.prev = 1;\n              // Updating Toast\n              state.toast.toastMsg = toastMsg;\n              state.toast.toastType = toastType;\n              setLoading(true);\n              _context7.next = 7;\n              return axios.post(url, {\n                product: productId\n              });\n\n            case 7:\n              response = _context7.sent;\n\n              if (response.data.success) {\n                dispatch({\n                  type: \"ADD_PRODUCT_TO_WISHLIST\",\n                  productId: productId,\n                  payload: response.data.wishItem\n                });\n                setLoading(false);\n              }\n\n              _context7.next = 14;\n              break;\n\n            case 11:\n              _context7.prev = 11;\n              _context7.t0 = _context7[\"catch\"](1);\n              console.log(\"addProductToDb\", _context7.t0);\n\n            case 14:\n              _context7.prev = 14;\n              console.log(\"FROM FINALLY ADD\", {\n                isLoading: isLoading\n              });\n              setLoading(false);\n              return _context7.finish(14);\n\n            case 18:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, null, [[1, 11, 14, 18]]);\n    }));\n\n    return function addProductToWishlist(_x7) {\n      return _ref15.apply(this, arguments);\n    };\n  }(); // console.log(\"useDataCONtext\", { state });\n\n\n  return /*#__PURE__*/React.createElement(DataContext.Provider, {\n    value: {\n      state: state,\n      dispatch: dispatch,\n      fetchProductAndAdd: fetchProductAndAdd,\n      updateCartQuantity: updateCartQuantity,\n      addProductToDb: addProductToDb,\n      removeProductFromDb: removeProductFromDb,\n      isLoading: isLoading,\n      addProductToCart: addProductToCart,\n      removeProductFromCart: removeProductFromCart,\n      addProductToWishlist: addProductToWishlist\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 5\n    }\n  }, children);\n};","map":{"version":3,"sources":["C:/Users/HP/Documents/GitHub/TheBarakMart-An-Ecommerce-website/src/context/DataContext.js"],"names":["axios","React","createContext","useReducer","useState","reducerFunc","DataContext","DataProvider","children","isLoading","setLoading","productList","wishList","cartList","filterStates","sortBy","includeOutOfStock","includeFastDelivery","loadingStatus","toast","toastMsg","toastType","displayComponent","state","dispatch","fetchProductAndAdd","url","dispatchType","listType","get","data","console","log","success","type","payload","updateCartQuantity","productId","updateType","currentQuantity","filter","product","_id","quantity","idToUpdate","post","status","cartItem","error","addProductToDb","itemNoId","removeProductFromDb","idToDelete","item","delete","response","addProductToCart","removeProductFromCart","addProductToWishlist","wishItem"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React, { createContext, useReducer, useState } from \"react\";\r\nimport { reducerFunc } from \"./reducerFunc\";\r\n\r\nexport const DataContext = createContext();\r\n\r\nexport const DataProvider = ({ children }) => {\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  const [state, dispatch] = useReducer(reducerFunc, {\r\n    productList: [],\r\n    wishList: [],\r\n    cartList: [],\r\n    filterStates: {\r\n      sortBy: null,\r\n      includeOutOfStock: true,\r\n      includeFastDelivery: false,\r\n    },\r\n    loadingStatus: false,\r\n    toast: {\r\n      toastMsg: \"\",\r\n      toastType: \"\",\r\n    },\r\n    displayComponent: \"PRODUCT\",\r\n  });\r\n\r\n  const fetchProductAndAdd = async ({ url, dispatchType, listType }) => {\r\n    try {\r\n      const { data } = await axios.get(url);\r\n      console.log({ data });\r\n      if (data.success) {\r\n        dispatch({ type: dispatchType, payload: data[listType] });\r\n      }\r\n    } catch (error) {\r\n      console.log(\"fetchProductAndAdd\", error);\r\n    }\r\n  };\r\n\r\n  const updateCartQuantity = async ({\r\n    url,\r\n    dispatchType,\r\n    productId,\r\n    updateType,\r\n    toastMsg,\r\n    toastType,\r\n  }) => {\r\n    let currentQuantity = state.cartList.filter(\r\n      (product) => product._id === productId\r\n    )[0].quantity;\r\n\r\n    const idToUpdate = state.cartList.filter(\r\n      (product) => product._id === productId\r\n    )[0]._id;\r\n\r\n    // Updating Toast\r\n    state.toast.toastMsg = toastMsg;\r\n    state.toast.toastType = toastType;\r\n\r\n    setLoading(true);\r\n\r\n    updateType === \"INCREMENT\"\r\n      ? (currentQuantity = currentQuantity + 1)\r\n      : (currentQuantity = currentQuantity - 1);\r\n\r\n    try {\r\n      const { data, status } = await axios.post(`${url}/${idToUpdate}`, {\r\n        product: { quantity: currentQuantity },\r\n      });\r\n\r\n      console.log({ data }, { status });\r\n\r\n      if (status === 200) {\r\n        dispatch({\r\n          type: dispatchType,\r\n          payload: data.cartItem.quantity,\r\n          productId: productId,\r\n          updateType: updateType,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(\"updateCartQuantity\", { error });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const addProductToDb = async ({\r\n    url,\r\n    listType,\r\n    dispatchType,\r\n    productId,\r\n    updateType,\r\n    toastMsg,\r\n    toastType,\r\n  }) => {\r\n    try {\r\n      const { _id, ...itemNoId } = state.productList.filter(\r\n        (product) => product._id === productId\r\n      )[0];\r\n\r\n      // Updating Toast\r\n      state.toast.toastMsg = toastMsg;\r\n      state.toast.toastType = toastType;\r\n\r\n      setLoading(true);\r\n\r\n      console.log({ _id }, { itemNoId });\r\n\r\n      const { data, status } = await axios.post(`${url}`, {\r\n        product: { ...itemNoId },\r\n      });\r\n\r\n      if (status === 201) {\r\n        dispatch({\r\n          type: dispatchType,\r\n          payload: data[listType],\r\n          productId: productId,\r\n          updateType: updateType,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(\"addProductToDb\", error);\r\n    } finally {\r\n      console.log(\"FROM FINALLY ADD\", { isLoading });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const removeProductFromDb = async ({\r\n    url,\r\n    listType,\r\n    dispatchType,\r\n    productId,\r\n    updateType,\r\n    toastMsg,\r\n    toastType,\r\n  }) => {\r\n    try {\r\n      const idToDelete = state[listType].filter(\r\n        (item) => item._id === productId\r\n      )[0]._id;\r\n\r\n      // Updating Toast\r\n      state.toast.toastMsg = toastMsg;\r\n      state.toast.toastType = toastType;\r\n\r\n      setLoading(true);\r\n\r\n      const response = await axios.delete(`${url}/${idToDelete}`);\r\n\r\n      if (response.status === 204) {\r\n        dispatch({\r\n          type: dispatchType,\r\n          productId: productId,\r\n          updateType: updateType,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(\"removeProductFromDb\", error);\r\n    } finally {\r\n      console.log(\"FROM FINALLY DELETE\", { isLoading });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const addProductToCart = async ({ url, productId, toastMsg, toastType }) => {\r\n    try {\r\n      const response = await axios.post(`${url}`, {\r\n        product: { _id: productId, quantity: 1 },\r\n      });\r\n\r\n      // Updating Toast\r\n      state.toast.toastMsg = toastMsg;\r\n      state.toast.toastType = toastType;\r\n\r\n      setLoading(true);\r\n\r\n      if (response.data.success) {\r\n        dispatch({\r\n          type: \"ADD_PRODUCT_TO_CART\",\r\n          payload: response.data.cartItem,\r\n          productId: productId,\r\n        });\r\n        fetchProductAndAdd({\r\n          url: `${url}`,\r\n          dispatchType: \"ADD_TO_CART\",\r\n          listType: \"cartList\",\r\n        });\r\n      }\r\n    } catch (error) {\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const removeProductFromCart = async ({\r\n    url,\r\n    productId,\r\n    toastMsg,\r\n    toastType,\r\n  }) => {\r\n    try {\r\n      const response = await axios.delete(`${url}/${productId}`);\r\n\r\n      // Updating Toast\r\n      state.toast.toastMsg = toastMsg;\r\n      state.toast.toastType = toastType;\r\n\r\n      setLoading(true);\r\n\r\n      if (response.data.success) {\r\n        dispatch({\r\n          type: \"REMOVE_PRODUCT_FROM_CART\",\r\n          productId: productId,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(\"removeProductFromDb\", error);\r\n      setLoading(false);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const addProductToWishlist = async ({\r\n    url,\r\n    productId,\r\n    toastMsg,\r\n    toastType,\r\n  }) => {\r\n    try {\r\n      // Updating Toast\r\n      state.toast.toastMsg = toastMsg;\r\n      state.toast.toastType = toastType;\r\n\r\n      setLoading(true);\r\n\r\n      const response = await axios.post(url, {\r\n        product: productId,\r\n      });\r\n\r\n      if (response.data.success) {\r\n        dispatch({\r\n          type: \"ADD_PRODUCT_TO_WISHLIST\",\r\n          productId: productId,\r\n          payload: response.data.wishItem,\r\n        });\r\n        setLoading(false);\r\n      }\r\n    } catch (error) {\r\n      console.log(\"addProductToDb\", error);\r\n    } finally {\r\n      console.log(\"FROM FINALLY ADD\", { isLoading });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // console.log(\"useDataCONtext\", { state });\r\n\r\n  return (\r\n    <DataContext.Provider\r\n      value={{\r\n        state,\r\n        dispatch,\r\n        fetchProductAndAdd,\r\n        updateCartQuantity,\r\n        addProductToDb,\r\n        removeProductFromDb,\r\n        isLoading,\r\n        addProductToCart,\r\n        removeProductFromCart,\r\n        addProductToWishlist,\r\n      }}\r\n    >\r\n      {children}\r\n    </DataContext.Provider>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}