{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\src\\\\components\\\\productList\\\\ProductList.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { ProductCard, SearchBar } from \"../index\";\nimport { useDataContext } from \"../../hook/index\";\nimport styles from \"./ProductList.module.css\";\nimport { updateProductsWithWishListAndCartStatus } from \"../../context/reducerFunc\";\n\nvar ProductList = function ProductList() {\n  var _useDataContext = useDataContext(),\n      state = _useDataContext.state;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      filteredData = _useState2[0],\n      setFilteredData = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      input = _useState4[0],\n      setInput = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      searchProductList = _useState6[0],\n      setSearchProductList = _useState6[1];\n\n  var getDataSorted = function getDataSorted(productList, sortBy) {\n    if (sortBy === null) {\n      return productList;\n    }\n\n    return sortBy === \"HIGH_TO_LOW\" ? productList.sort(function (a, b) {\n      return parseFloat(b.price) - parseFloat(a.price);\n    }) : productList.sort(function (a, b) {\n      return parseFloat(a.price) - parseFloat(b.price);\n    });\n  };\n\n  var getFilteredData = function getFilteredData(productList, isIncludeFastDelivery, isIncludeOutOfStock) {\n    if (isIncludeFastDelivery) {\n      productList = productList.filter(function (item) {\n        return item.fastDelivery;\n      });\n    }\n\n    if (!isIncludeOutOfStock) {\n      productList = productList.filter(function (item) {\n        return item.inStock;\n      });\n    }\n\n    return productList;\n  };\n\n  var sortedData = getDataSorted(state.productList, state.filterStates.sortBy);\n  var dataFilter = getFilteredData(sortedData, state.filterStates.includeFastDelivery, state.filterStates.includeOutOfStock);\n  console.log(\"1\", {\n    dataFilter: dataFilter\n  });\n  setFilteredData(dataFilter); // Search Product function\n\n  var updateInput = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(input) {\n      var filtered;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setInput(input);\n              filtered = filteredData.filter(function (product) {\n                return product.name.toLowerCase().includes(input.toLowerCase());\n              });\n              setSearchProductList(filtered);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function updateInput(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(); // condition for when to include the searched product to the list\n  // input.length > 0\n  //   ? setFilteredData(searchProductList)\n  //   : setFilteredData(\n  //       getFilteredData(\n  //         sortedData,\n  //         state.filterStates.includeFastDelivery,\n  //         state.filterStates.includeOutOfStock\n  //       )\n  //     );\n\n\n  if (input.length > 0) {\n    setFilteredData(searchProductList);\n  } else {\n    var _dataFilter = getFilteredData(sortedData, state.filterStates.includeFastDelivery, state.filterStates.includeOutOfStock);\n\n    console.log(\"2\", {\n      dataFilter: _dataFilter\n    });\n    setFilteredData(_dataFilter);\n  } // useEffect(() => {\n  //   setFilteredData(\n  //     updateProductsWithWishListAndCartStatus(\n  //       filteredData,\n  //       state.wishList,\n  //       state.cartList\n  //     )\n  //   );\n  // }, [filteredData, state.cartList, state.wishList]);\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.productListContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(SearchBar, {\n    input: input,\n    onChange: updateInput,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      marginLeft: \"1em\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, \" All Products \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.productList,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, filteredData.length > 0 && filteredData.map(function (_ref2, index) {\n    var _id = _ref2._id,\n        name = _ref2.name,\n        desc = _ref2.desc,\n        image = _ref2.image,\n        price = _ref2.price,\n        fastDelivery = _ref2.fastDelivery,\n        inStock = _ref2.inStock,\n        offer = _ref2.offer;\n    return /*#__PURE__*/React.createElement(ProductCard, {\n      key: _id,\n      productId: _id,\n      index: index,\n      dismissBtn: false,\n      name: name,\n      desc: desc,\n      image: image,\n      price: price,\n      fastDelivery: fastDelivery,\n      inStock: inStock,\n      offer: offer,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }\n    });\n  })));\n};\n\nexport { ProductList };","map":{"version":3,"sources":["C:/Users/HP/Documents/GitHub/TheBarakMart-An-Ecommerce-website/src/components/productList/ProductList.js"],"names":["React","useState","useEffect","ProductCard","SearchBar","useDataContext","styles","updateProductsWithWishListAndCartStatus","ProductList","state","filteredData","setFilteredData","input","setInput","searchProductList","setSearchProductList","getDataSorted","productList","sortBy","sort","a","b","parseFloat","price","getFilteredData","isIncludeFastDelivery","isIncludeOutOfStock","filter","item","fastDelivery","inStock","sortedData","filterStates","dataFilter","includeFastDelivery","includeOutOfStock","console","log","updateInput","filtered","product","name","toLowerCase","includes","length","productListContainer","marginLeft","map","index","_id","desc","image","offer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { ProductCard, SearchBar } from \"../index\";\r\nimport { useDataContext } from \"../../hook/index\";\r\nimport styles from \"./ProductList.module.css\";\r\nimport { updateProductsWithWishListAndCartStatus } from \"../../context/reducerFunc\";\r\n\r\nconst ProductList = () => {\r\n  const { state } = useDataContext();\r\n\r\n  const [filteredData, setFilteredData] = useState([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [searchProductList, setSearchProductList] = useState();\r\n\r\n  const getDataSorted = (productList, sortBy) => {\r\n    if (sortBy === null) {\r\n      return productList;\r\n    }\r\n\r\n    return sortBy === \"HIGH_TO_LOW\"\r\n      ? productList.sort((a, b) => parseFloat(b.price) - parseFloat(a.price))\r\n      : productList.sort((a, b) => parseFloat(a.price) - parseFloat(b.price));\r\n  };\r\n\r\n  const getFilteredData = (\r\n    productList,\r\n    isIncludeFastDelivery,\r\n    isIncludeOutOfStock\r\n  ) => {\r\n    if (isIncludeFastDelivery) {\r\n      productList = productList.filter((item) => item.fastDelivery);\r\n    }\r\n\r\n    if (!isIncludeOutOfStock) {\r\n      productList = productList.filter((item) => item.inStock);\r\n    }\r\n\r\n    return productList;\r\n  };\r\n\r\n  const sortedData = getDataSorted(\r\n    state.productList,\r\n    state.filterStates.sortBy\r\n  );\r\n\r\n  let dataFilter = getFilteredData(\r\n    sortedData,\r\n    state.filterStates.includeFastDelivery,\r\n    state.filterStates.includeOutOfStock\r\n  );\r\n  console.log(\"1\", { dataFilter });\r\n  setFilteredData(dataFilter);\r\n  // Search Product function\r\n\r\n  const updateInput = async (input) => {\r\n    setInput(input);\r\n\r\n    const filtered = filteredData.filter((product) => {\r\n      return product.name.toLowerCase().includes(input.toLowerCase());\r\n    });\r\n    setSearchProductList(filtered);\r\n  };\r\n\r\n  // condition for when to include the searched product to the list\r\n  // input.length > 0\r\n  //   ? setFilteredData(searchProductList)\r\n  //   : setFilteredData(\r\n  //       getFilteredData(\r\n  //         sortedData,\r\n  //         state.filterStates.includeFastDelivery,\r\n  //         state.filterStates.includeOutOfStock\r\n  //       )\r\n  //     );\r\n  if (input.length > 0) {\r\n    setFilteredData(searchProductList);\r\n  } else {\r\n    let dataFilter = getFilteredData(\r\n      sortedData,\r\n      state.filterStates.includeFastDelivery,\r\n      state.filterStates.includeOutOfStock\r\n    );\r\n    console.log(\"2\", { dataFilter });\r\n    setFilteredData(dataFilter);\r\n  }\r\n\r\n  // useEffect(() => {\r\n  //   setFilteredData(\r\n  //     updateProductsWithWishListAndCartStatus(\r\n  //       filteredData,\r\n  //       state.wishList,\r\n  //       state.cartList\r\n  //     )\r\n  //   );\r\n  // }, [filteredData, state.cartList, state.wishList]);\r\n\r\n  return (\r\n    <div className={styles.productListContainer}>\r\n      <SearchBar input={input} onChange={updateInput} />\r\n      <h1 style={{ marginLeft: \"1em\" }}> All Products </h1>\r\n      <div className={styles.productList}>\r\n        {filteredData.length > 0 &&\r\n          filteredData.map(\r\n            (\r\n              { _id, name, desc, image, price, fastDelivery, inStock, offer },\r\n              index\r\n            ) => {\r\n              return (\r\n                <ProductCard\r\n                  key={_id}\r\n                  productId={_id}\r\n                  index={index}\r\n                  dismissBtn={false}\r\n                  name={name}\r\n                  desc={desc}\r\n                  image={image}\r\n                  price={price}\r\n                  fastDelivery={fastDelivery}\r\n                  inStock={inStock}\r\n                  offer={offer}\r\n                />\r\n              );\r\n            }\r\n          )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { ProductList };\r\n"]},"metadata":{},"sourceType":"module"}