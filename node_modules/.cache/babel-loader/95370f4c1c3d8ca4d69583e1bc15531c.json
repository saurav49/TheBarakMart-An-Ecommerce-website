{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\TheBarakMart-An-Ecommerce-website\\\\src\\\\context\\\\DataContext.js\";\n\nimport axios from \"axios\";\nimport React, { createContext, useReducer, useState } from \"react\";\nimport { reducerFunc } from \"./reducerFunc\";\nexport var DataContext = createContext();\nexport var DataProvider = function DataProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useReducer = useReducer(reducerFunc, {\n    productList: [],\n    wishList: [],\n    cartList: [],\n    filterStates: {\n      sortBy: null,\n      includeOutOfStock: true,\n      includeFastDelivery: false\n    },\n    loadingStatus: false,\n    toast: {\n      toastMsg: \"\",\n      toastType: \"\"\n    },\n    displayComponent: \"PRODUCT\"\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var fetchProductAndAdd = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n      var url, dispatchType, listType, _yield$axios$get, data, status;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              url = _ref2.url, dispatchType = _ref2.dispatchType, listType = _ref2.listType;\n              _context.prev = 1;\n              console.log(\"fetchandadd\", url, dispatchType, listType);\n              _context.next = 5;\n              return axios.get(url);\n\n            case 5:\n              _yield$axios$get = _context.sent;\n              data = _yield$axios$get.data;\n              status = _yield$axios$get.status;\n              console.log(\"fetchProductAndAdd\", data, status);\n\n              if (status === 200) {\n                dispatch({\n                  type: dispatchType,\n                  payload: data[listType]\n                });\n              }\n\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](1);\n              alert(_context.t0);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 12]]);\n    }));\n\n    return function fetchProductAndAdd(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var updateCartQuantity = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref4) {\n      var url, dispatchType, productId, updateType, toastMsg, toastType, currentQuantity, idToUpdate, _yield$axios$patch, data, status;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              url = _ref4.url, dispatchType = _ref4.dispatchType, productId = _ref4.productId, updateType = _ref4.updateType, toastMsg = _ref4.toastMsg, toastType = _ref4.toastType;\n              currentQuantity = state.cartList.filter(function (product) {\n                return product.productId === productId;\n              })[0].quantity;\n              idToUpdate = state.cartList.filter(function (product) {\n                return product.productId === productId;\n              })[0].id; // Updating Toast\n\n              state.toast.toastMsg = toastMsg;\n              state.toast.toastType = toastType;\n              setLoading(true);\n              state.loadingStatus = true;\n              updateType === \"INCREMENT\" ? currentQuantity = currentQuantity + 1 : currentQuantity = currentQuantity - 1;\n              _context2.prev = 8;\n              _context2.next = 11;\n              return axios.patch(\"\".concat(url, \"/\").concat(idToUpdate), {\n                product: {\n                  quantity: currentQuantity\n                }\n              });\n\n            case 11:\n              _yield$axios$patch = _context2.sent;\n              data = _yield$axios$patch.data;\n              status = _yield$axios$patch.status;\n\n              if (status === 200) {\n                dispatch({\n                  type: dispatchType,\n                  payload: data.cartList.quantity,\n                  productId: productId,\n                  updateType: updateType\n                });\n              }\n\n              _context2.next = 20;\n              break;\n\n            case 17:\n              _context2.prev = 17;\n              _context2.t0 = _context2[\"catch\"](8);\n              alert(_context2.t0);\n\n            case 20:\n              _context2.prev = 20;\n              state.loadingStatus = false;\n              setLoading(false);\n              return _context2.finish(20);\n\n            case 24:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[8, 17, 20, 24]]);\n    }));\n\n    return function updateCartQuantity(_x2) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var addProductToDb = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref6) {\n      var url, listType, dispatchType, productId, updateType, toastMsg, toastType, _state$productList$fi, id, itemNoId, _yield$axios$post, data, status;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              url = _ref6.url, listType = _ref6.listType, dispatchType = _ref6.dispatchType, productId = _ref6.productId, updateType = _ref6.updateType, toastMsg = _ref6.toastMsg, toastType = _ref6.toastType;\n              _context3.prev = 1;\n              _state$productList$fi = state.productList.filter(function (product) {\n                return product.productId === productId;\n              })[0], id = _state$productList$fi.id, itemNoId = _objectWithoutProperties(_state$productList$fi, [\"id\"]); // Updating Toast\n\n              state.toast.toastMsg = toastMsg;\n              state.toast.toastType = toastType;\n              setLoading(true);\n              state.loadingStatus = true;\n              _context3.next = 9;\n              return axios.post(\"\".concat(url), {\n                product: _objectSpread({}, itemNoId)\n              });\n\n            case 9:\n              _yield$axios$post = _context3.sent;\n              data = _yield$axios$post.data;\n              status = _yield$axios$post.status;\n\n              if (status === 201) {\n                dispatch({\n                  type: dispatchType,\n                  payload: data[listType],\n                  productId: productId,\n                  updateType: updateType\n                });\n              }\n\n              _context3.next = 18;\n              break;\n\n            case 15:\n              _context3.prev = 15;\n              _context3.t0 = _context3[\"catch\"](1);\n              alert(_context3.t0);\n\n            case 18:\n              _context3.prev = 18;\n              state.loadingStatus = false;\n              console.log(\"FROM FINALLY ADD\", {\n                isLoading: isLoading\n              }, state.loadingStatus);\n              setLoading(false);\n              return _context3.finish(18);\n\n            case 23:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 15, 18, 23]]);\n    }));\n\n    return function addProductToDb(_x3) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var removeProductFromDb = /*#__PURE__*/function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref8) {\n      var url, listType, dispatchType, productId, updateType, toastMsg, toastType, idToDelete, response;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              url = _ref8.url, listType = _ref8.listType, dispatchType = _ref8.dispatchType, productId = _ref8.productId, updateType = _ref8.updateType, toastMsg = _ref8.toastMsg, toastType = _ref8.toastType;\n              _context4.prev = 1;\n              idToDelete = state[listType].filter(function (item) {\n                return item.productId === productId;\n              })[0].id; // Updating Toast\n\n              state.toast.toastMsg = toastMsg;\n              state.toast.toastType = toastType;\n              setLoading(true);\n              state.loadingStatus = true;\n              _context4.next = 9;\n              return axios.delete(\"\".concat(url, \"/\").concat(idToDelete));\n\n            case 9:\n              response = _context4.sent;\n\n              if (response.status === 204) {\n                dispatch({\n                  type: dispatchType,\n                  productId: productId,\n                  updateType: updateType\n                });\n              }\n\n              _context4.next = 16;\n              break;\n\n            case 13:\n              _context4.prev = 13;\n              _context4.t0 = _context4[\"catch\"](1);\n              alert(_context4.t0);\n\n            case 16:\n              _context4.prev = 16;\n              state.loadingStatus = false;\n              console.log(\"FROM FINALLY DELETE\", {\n                isLoading: isLoading\n              }, state.loadingStatus);\n              setLoading(false);\n              return _context4.finish(16);\n\n            case 21:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[1, 13, 16, 21]]);\n    }));\n\n    return function removeProductFromDb(_x4) {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n\n  console.log(\"useDataCONtext\", {\n    state: state\n  });\n  return /*#__PURE__*/React.createElement(DataContext.Provider, {\n    value: {\n      state: state,\n      dispatch: dispatch,\n      fetchProductAndAdd: fetchProductAndAdd,\n      updateCartQuantity: updateCartQuantity,\n      addProductToDb: addProductToDb,\n      removeProductFromDb: removeProductFromDb,\n      isLoading: isLoading\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 5\n    }\n  }, children);\n};","map":{"version":3,"sources":["C:/Users/HP/Documents/GitHub/TheBarakMart-An-Ecommerce-website/src/context/DataContext.js"],"names":["axios","React","createContext","useReducer","useState","reducerFunc","DataContext","DataProvider","children","isLoading","setLoading","productList","wishList","cartList","filterStates","sortBy","includeOutOfStock","includeFastDelivery","loadingStatus","toast","toastMsg","toastType","displayComponent","state","dispatch","fetchProductAndAdd","url","dispatchType","listType","console","log","get","data","status","type","payload","alert","updateCartQuantity","productId","updateType","currentQuantity","filter","product","quantity","idToUpdate","id","patch","addProductToDb","itemNoId","post","removeProductFromDb","idToDelete","item","delete","response"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React, { createContext, useReducer, useState } from \"react\";\r\nimport { reducerFunc } from \"./reducerFunc\";\r\n\r\nexport const DataContext = createContext();\r\n\r\nexport const DataProvider = ({ children }) => {\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  const [state, dispatch] = useReducer(reducerFunc, {\r\n    productList: [],\r\n    wishList: [],\r\n    cartList: [],\r\n    filterStates: {\r\n      sortBy: null,\r\n      includeOutOfStock: true,\r\n      includeFastDelivery: false,\r\n    },\r\n    loadingStatus: false,\r\n    toast: {\r\n      toastMsg: \"\",\r\n      toastType: \"\",\r\n    },\r\n    displayComponent: \"PRODUCT\",\r\n  });\r\n\r\n  const fetchProductAndAdd = async ({ url, dispatchType, listType }) => {\r\n    try {\r\n      console.log(\"fetchandadd\", url, dispatchType, listType);\r\n      const { data, status } = await axios.get(url);\r\n\r\n      console.log(\"fetchProductAndAdd\", data, status);\r\n      if (status === 200) {\r\n        dispatch({ type: dispatchType, payload: data[listType] });\r\n      }\r\n    } catch (error) {\r\n      alert(error);\r\n    }\r\n  };\r\n\r\n  const updateCartQuantity = async ({\r\n    url,\r\n    dispatchType,\r\n    productId,\r\n    updateType,\r\n    toastMsg,\r\n    toastType,\r\n  }) => {\r\n    let currentQuantity = state.cartList.filter(\r\n      (product) => product.productId === productId\r\n    )[0].quantity;\r\n\r\n    const idToUpdate = state.cartList.filter(\r\n      (product) => product.productId === productId\r\n    )[0].id;\r\n\r\n    // Updating Toast\r\n    state.toast.toastMsg = toastMsg;\r\n    state.toast.toastType = toastType;\r\n\r\n    setLoading(true);\r\n\r\n    state.loadingStatus = true;\r\n\r\n    updateType === \"INCREMENT\"\r\n      ? (currentQuantity = currentQuantity + 1)\r\n      : (currentQuantity = currentQuantity - 1);\r\n\r\n    try {\r\n      const { data, status } = await axios.patch(`${url}/${idToUpdate}`, {\r\n        product: { quantity: currentQuantity },\r\n      });\r\n\r\n      if (status === 200) {\r\n        dispatch({\r\n          type: dispatchType,\r\n          payload: data.cartList.quantity,\r\n          productId: productId,\r\n          updateType: updateType,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      alert(error);\r\n    } finally {\r\n      state.loadingStatus = false;\r\n\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const addProductToDb = async ({\r\n    url,\r\n    listType,\r\n    dispatchType,\r\n    productId,\r\n    updateType,\r\n    toastMsg,\r\n    toastType,\r\n  }) => {\r\n    try {\r\n      const { id, ...itemNoId } = state.productList.filter(\r\n        (product) => product.productId === productId\r\n      )[0];\r\n\r\n      // Updating Toast\r\n      state.toast.toastMsg = toastMsg;\r\n      state.toast.toastType = toastType;\r\n\r\n      setLoading(true);\r\n\r\n      state.loadingStatus = true;\r\n\r\n      const { data, status } = await axios.post(`${url}`, {\r\n        product: { ...itemNoId },\r\n      });\r\n\r\n      if (status === 201) {\r\n        dispatch({\r\n          type: dispatchType,\r\n          payload: data[listType],\r\n          productId: productId,\r\n          updateType: updateType,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      alert(error);\r\n    } finally {\r\n      state.loadingStatus = false;\r\n      console.log(\"FROM FINALLY ADD\", { isLoading }, state.loadingStatus);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const removeProductFromDb = async ({\r\n    url,\r\n    listType,\r\n    dispatchType,\r\n    productId,\r\n    updateType,\r\n    toastMsg,\r\n    toastType,\r\n  }) => {\r\n    try {\r\n      const idToDelete = state[listType].filter(\r\n        (item) => item.productId === productId\r\n      )[0].id;\r\n\r\n      // Updating Toast\r\n      state.toast.toastMsg = toastMsg;\r\n      state.toast.toastType = toastType;\r\n\r\n      setLoading(true);\r\n\r\n      state.loadingStatus = true;\r\n\r\n      const response = await axios.delete(`${url}/${idToDelete}`);\r\n\r\n      if (response.status === 204) {\r\n        dispatch({\r\n          type: dispatchType,\r\n          productId: productId,\r\n          updateType: updateType,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      alert(error);\r\n    } finally {\r\n      state.loadingStatus = false;\r\n      console.log(\"FROM FINALLY DELETE\", { isLoading }, state.loadingStatus);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  console.log(\"useDataCONtext\", { state });\r\n\r\n  return (\r\n    <DataContext.Provider\r\n      value={{\r\n        state,\r\n        dispatch,\r\n        fetchProductAndAdd,\r\n        updateCartQuantity,\r\n        addProductToDb,\r\n        removeProductFromDb,\r\n        isLoading,\r\n      }}\r\n    >\r\n      {children}\r\n    </DataContext.Provider>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}